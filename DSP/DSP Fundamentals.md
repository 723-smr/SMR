>将**模拟**信号转换为**数字**等效信号涉及两个过程：**采样**和**量化**。在采样和量化过程的输出中，**模拟信号在时间和幅度上都被离散化**，换句话说，它已被转换为**数字信号**。
>将**采样**视为将**信号的时间轴转换为一组离散时刻**，而**量化**将其**幅度转换为一组离散的可表示幅度值**

# 一.采样 Sampling
![](assets/DSP%20Fundamentals/file-20260119212404061.png)
* z(t)为模拟信号，z(k)为数字信号,**z(t)通过ADC变为z(k)**

* 模拟信号被认为是**连续时间**的，这意味着其幅度在所有时间内都被定义，并且可以在任意时间点进行测量或表示

* 右侧为数字域，这些时刻用**采样周期ts分隔**

* 上图所示的转换过程即为**采样**

## 1.采样率选择

* 80Hz采样：会出现混叠
**aliasing：** 如下图所示，100Hz的sin如果用80Hz的速率采样，那么实际上会感知到较低频率的正弦波（如下图中蓝色线条所示），这种效应通常称为混叠。
![](assets/DSP%20Fundamentals/file-20260119212432831.png)
混叠信号频率与正弦波频率和采样率的关系：![](assets/DSP%20Fundamentals/file-20260119212449373.png)
* 2kHz采样：信号肯定会被准确的重建，每个正弦波周期二十个样本实际上远远超过了所需的最小值，意味着应用于信号的任何后续处理操作的计算开销很大
![](assets/DSP%20Fundamentals/file-20260119212511668.png)
* 500kHz：每个正弦波周期有五个样本，从而在精确捕获正弦波和保持相当低的计算速率之间取得良好的平衡。
![](assets/DSP%20Fundamentals/file-20260119212622663.png)
## 2.信号频率范围术语

### （1）baseband signal：
最低频率分量为0或接近0的信号
### （2）bandpass signal：
信号占据一个频率范围，不临近于0

## 3.奈奎斯特采样定理（Nyquist Sampling Theorem）

为**避免混叠**，奈奎斯特采样定理给出了**最小可能采样频率**——基带、带限信号必须以**大于信号中存在的最大频率分量的两倍的频率**进行采样：

$$

f_s > 2f_{max}

$$

奈奎斯特采样定理同样适用于带通、带限信号。**Bandwidth**带宽定义为存在的最高和最低频率分量之间的差，带宽可表示为：

$$

BW = f_h - f_l

$$

则采样频率要满足：

$$

f_S>2\times BW

$$

## 4.奈奎斯特区和混叠

存在于更高奈奎斯特区的任何信号成分都会因混叠而“折叠”到第一奈奎斯特区
![](assets/DSP%20Fundamentals/file-20260119212758288.png)

以理想的ADC采样频率为200Hz为例：

* 任何频率低于100Hz的输入信号都将被完美捕获，位于第一奈奎斯特区
* 如果将100Hz到200Hz之间的信号频率应用于ADC，这些组件将出现混叠的，从而导致第二奈奎斯特区域中的组件将被折叠到第一奈奎斯特区域中
![](assets/DSP%20Fundamentals/file-20260119212954984.png)
**利用混叠：** 欠采样技术可用于利用混叠，并故意将带通信号折叠到奈奎斯特1区，该技术可在接收器中用作将IF或RF调制信号转换为基带的方法——**直接下变频**（该技术的示例如上图的紫色线条所示）
**Undersampling（直接下变换）：** 故意将带通信号折叠到奈奎斯特区1。通常用于接收机，将中频或射频调制信号转换为基带信号。

## 5.采样抖动（Sampling Jitter）

实际中采样间隔并不是完全一模一样的，会存在稍许偏差，被称为“抖动”。由于样本与理想采样时刻相比在时间上错位，因此幅度值会出现相应的误差。 因此，**抖动可以被建模为噪声源**。

# 二.量化 Quantisation

量化将其**幅度**转换为一组**离散的可表示幅度值**。当信号被量化时，在 ADC 的每个采样时刻获取的幅度值被映射到一组离散的可能幅度水平中的一个。
## 1.量化过程

我们认为ADC具有位分辨率，因此可以表示不同的值，这些对应于输入信号的样本将被映射到的一组离散量化级别，通常是以线性方式完成的。
![](assets/DSP%20Fundamentals/file-20260119213042007.png)
* N的值越大（bit越多），分布在ADC工作范围内的量化级别数量就越多
* 上图中负量化水平比正量化水平多一个，但对于N的实际值这种影响可以忽略不计（实际的ADC拥有很多很多bit）
* 当模拟样本被量化时，它们会被“移动”到最接近的可用量化级别。**N越大，转换越准确，分辨率也越高**
* 量化误差（quantisation errors）：**模拟样本和量化样本之间所表示的幅度的变化**被称为量化误差
* 量化间隔（quansition step，q）：![](assets/DSP%20Fundamentals/file-20260119213103723.png),其中Vmax为ADC的最大输入电压。

## 2.量化误差
![](assets/DSP%20Fundamentals/file-20260119213136243.png)
在对样本进行量化时，一定会出现如上图所示范围内的量化误差，上图面积为1

## 3.量化噪声

![](assets/DSP%20Fundamentals/file-20260119213155994.png)
## 4.周期信号与频率杂散

实际上，并非所有输入到ADC量化器的信号都会产生前节讨论的随机误差。某些信号的量化通常会引发一些不受欢迎但具体的频率波动。这些杂音是谐波信号失真，是不受欢迎的。这个杂散通过mertic SFDR（虚假自由动态范围Spurious Free Dynamic Range无杂散动态范围）来量化。
![](assets/DSP%20Fundamentals/file-20260119213219254.png)
# 三.时域和频域

**从时域到频域的转换：**

DFT离散傅里叶变换（逆运算IDFT）

FFT快速傅里叶变换：DFT更有效的形式（逆运算IFFT）

![](assets/DSP%20Fundamentals/file-20260119213232641.png)
# 四.Filtering滤波

滤波通常用于改变信号的频率组成。滤波不会改变信号的大小（或改变很小），滤波的目的是修改信号的相位。

## 1.滤波响应类型
low pass 低通
high pass 高通
band pass 带通
band stop 带阻
all-pass 全通

![](assets/DSP%20Fundamentals/file-20260119213311040.png)
## 2.FIR（Finite Impulse Response有限脉冲响应滤波器）

> **FIR 滤波器是一种数字滤波器，其冲激响应在有限个采样点后完全为零。**

FIR对脉冲的响应仅持续有限数量的样本，IIR可以永远持续。
![](assets/DSP%20Fundamentals/file-20260119213340563.png)

FIR滤波器的单位脉冲响应即为它对所有频率的响应。在离散时域中，我们记**FIR滤波器的单位脉冲响应为**$w[n]$，因此在时间戳k处，**输出$y[k]$可表示为$x[k]$与$w[k]$的卷积**：

$$

y[k] = \sum_{n=0}^{N-1}w[n]x[k-n]

$$
其中：
$x[n]$：输入信号
$y[n]$：输出信号
$h[k]$：滤波器系数（冲激响应）
$N$：滤波器阶数 + 1（长度）
* 特征：**只包含前馈项，没有反馈**
$w_n$中的n代表n权重，对于一个5权重的FIR滤波器，我们也可以写出差分方程（5权重可以理解成5个采样点）：
$$

y[k]=w_0x[k]+w_1x[k-1]+w2x[k-2]+w_3x[k-3]+w4x[k-4]

$$
上式可以确认需要5个乘法器和4个加法器，标有“delta”符号的块代表单样本延迟（我们很快将使用更正式的 Z 表示法替换它们）：![](assets/DSP%20Fundamentals/file-20260119213415584.png)

>FIR滤波器的**优点**：
 *  因为**没有反馈路径**，所以FIR滤波器本质上是**稳定**的
 >*  FIR滤波器具有对称权重，因此具有线性相位相应的属性，这意味着**通过滤波器的所有频率都会延迟相同的时间，这对应于线性增加的相位差**

> **FIR滤波器的一个权重代表一个乘法器**

# 五.The Analogue-Digital Interface

>ADC 前面是抗混叠低通滤波器（Anti-aliasing LPF）
>DAC 后面是低通模拟重构滤波器（Reconstruction LPF）
## 1.模数转换（A to D）

在奈奎斯特区1工作的传统ADC之前有一个**模拟低通抗混叠滤波器**，以仅**保留奈奎斯特区1中的频率分量**，并**衰减ADC输入端的所有高频信号分量**（奈奎斯特1区就是采样时“最安全、不打架”的频率范围，在这里，信号看得最清楚，在信号处理、滤波器、ADC采样中都希望信号在奈奎斯特1区内）

>**Q:** 为什么要在第1奈奎斯特区？

>**A:** 为了避免混叠.采样本质为频谱以fs为周期无限复制，如果信号频谱超出了fs/2，就会**折叠回低频**（以fs=100MHz为例）：

>|输入信号频率|实际数字域看到的|
>|-------|-------|
>|10MHz|10MHz（正常）|
>|40MHz|40MHz（正常）|
>|60MHz|40MHz（混叠）|
>|90MHz|10MHz（混叠）|
>→ADC分不清是真40MHz还是60MHz
  
* 抗混叠滤波器在采样之前，目的在于**抑制位于奈奎斯特频率以上的频谱分量，防止其在采样过程中折叠到基带内产生混叠失真**
![](assets/DSP%20Fundamentals/file-20260119213853334.png)
## 2.数模转换（D to A）
![](assets/DSP%20Fundamentals/file-20260119213916144.png)
DAC输出的并不是干净的模拟信号，而是带有大量高频镜像和阶梯效应的信号，实际上是一种阶梯波，如上图所示。在DAC后添加一个低通重构滤波器的作用是**去掉镜像频谱、平滑阶梯波形、恢复连续时间的原始模拟信号**。

# 六.多速率处理

通过多速率操作来更改DSP系统中的采样率。例如，如果信号以10MHz采样，则可以使用多速率操作将采样率提高到40MHz（**插值4倍**），或者可以使用**2倍抽取**将采样率降低到5MHz。
Eg：
* 仅当两个信号具有相同的采样率时才能相加
* 在信号带宽变化时将采样率调整得更接近奈奎斯特
* 为了匹配外部接口（如DAC）的采样率
* 为了减轻模拟抗混叠或镜像抑制滤波器的要求。根据奈奎斯特采样定理（通常称为过采样），通常需要以高于所需的采样率操作 DAC 或 ADC，以便实现抗混叠或抗镜像滤波器不太严格的滤波要求
## 1.Decimation 抽取

抽取是**降低采样率**的过程，是通过整数因子M来完成的。包含两个过程**抗混叠低通滤波**和**下采样**：

* Low pass filtering：消除采样率降低时可能混叠的频率分量，此任务通常采用FIR滤波器
* Downsampling：仅保留每个Mth的样本并丢弃中间的样本来降低采样率的过程
![](assets/DSP%20Fundamentals/file-20260119213953582.png)
在对信号进行滤波以去除会混叠的项后，可以通过下采样器来降低采样率。 在时域中，请注意，由于下采样器每 3 个输入样本中丢弃 2 个，样本之间的周期增加了 3 倍。
![](assets/DSP%20Fundamentals/file-20260119214014949.png)
## 2.Interpolation 插值

插值会提高采样率，通常通过表示为L的整数因子来提高。插值器由**上采样**操作和**低通镜像抑制滤波器**来实现：

* Upsampling：在每对原始样本之间插入（L-1）个零值样本，从而将采样率提高L倍
* Low pass filtering：去除0~fu/2之间的频谱，fu是上采样采样率。这些频谱始终以原始采样率的整数倍出现

![](assets/DSP%20Fundamentals/file-20260119214033160.png)
上采样在原始采样率之间插入两个零值样本，将采样率提高3倍。在频域中围绕原始采样率fs对称的两个频谱图像现在存在于0Hz和新的上采样采样率一半fu/2之间的区域中。
然后必须使用低通镜像抑制滤波器去除这两个光谱图像，这在时域中表现为信号的平滑。
![](assets/DSP%20Fundamentals/file-20260120201717495.jpg)
* 为什么要进行上采样？如图紫色的sinc包络所示，上采样后，可以更好地抑制远端的无用镜像信号：②处信号频谱与采样率增加后的sinc包络相乘比①处信号频谱与原采样率的sinc包络更小，即对无用信号压抑的更好。
  量化抑制效果：
